<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HW8VMTX83M"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-HW8VMTX83M');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker News Articles</title>
    <!-- Add any CSS styles here for styling -->
</head>
<body>
    <h1>Top 10 Hacker News Articles</h1>
    <ul id="article-list">
        <!-- Articles will be dynamically added here using JavaScript -->
    </ul>

    <!-- Add this script block to your HTML file, preferably just before the closing </body> tag -->
    <script>
        // Function to fetch and parse an RSS feed
        function fetchAndDisplayRSSFeed() {
            // URL of the RSS feed
            const rssFeedUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent('https://therecord.media/feed');

            // Select the container where you want to display the feed
            const articleList = document.getElementById('article-list');

            // Keywords to filter articles
            const keywordsToFilter = ['cybercrime', 'security', 'hacking'];

            // Make a GET request to fetch the RSS feed
            fetch(rssFeedUrl)
                .then((response) => response.json())
                .then((data) => {
                    // Parse the XML data into a DOM object
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(data.contents, 'text/xml');

                    // Get all the items (articles) from the RSS feed
                    const items = xmlDoc.querySelectorAll('item');

                    // Loop through the items and filter/display them based on keywords
                    items.forEach((item) => {
                        // Extract relevant data from the item
                        const title = item.querySelector('title').textContent;
                        const link = item.querySelector('link').textContent;
                        const description = item.querySelector('description').textContent;

                        // Check if the article contains any of the keywords
                        const containsKeyword = keywordsToFilter.some(keyword =>
                            title.toLowerCase().includes(keyword) ||
                            description.toLowerCase().includes(keyword)
                        );

                        // If it contains a keyword, create and display the article
                        if (containsKeyword) {
                            const articleDiv = document.createElement('div');
                            articleDiv.className = 'col-lg-4 col-md-6 col-sm-12 blog-one__single'; // Add your custom class
                            articleDiv.innerHTML = `
                                <h3><a href="${link}" target="_blank">${title}</a></h3>
                                <p>${description}</p>
                            `;
                            articleList.appendChild(articleDiv);
                        }
                    });
                })
                .catch((error) => {
                    console.error('Error fetching RSS feed:', error);
                });
        }

        // Call the function to fetch and display the RSS feed
        fetchAndDisplayRSSFeed();
    </script>
</body>
</html>
